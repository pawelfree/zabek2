<mat-toolbar color="primary">
  <span><a routerLink="/">RTG cloud</a></span>
  <div fxFlex fxLayout fxLayoutAlign="end">
    <ul fxLayout fxLayoutGap="5px">
      <ng-container *ngIf="isLoggedIn">
        <ng-container *ngFor="let menuItem of menuList">
          <ng-container *ngIf="!menuItem.children && authorized(menuItem.roles)">
            <a mat-button [routerLink]="menuItem.routerLink" routerLinkActive="mat-accent">{{menuItem.label}}</a>
          </ng-container>
          <ng-container *ngIf="menuItem.children && menuItem.children.length > 0 && authorized(menuItem.roles)">
            <a #button 
                mat-button 
                [routerLink]="menuItem.routerLink"
                [matMenuTriggerFor]="levelOne" 
                #levelOneTrigger="matMenuTrigger" 
                (mouseenter)="buttonEnter(levelOneTrigger)" 
                (mouseleave)="buttonLeave(levelOneTrigger, button)"
                style="z-index:1050">
                {{menuItem.label}}
            </a>     
            <mat-menu #levelOne="matMenu" 
                      direction="down" 
                      yPosition="below">
              <span (mouseenter)="menuenter()" 
                    (mouseleave)="menuLeave(levelOneTrigger, button)">
                <ng-container *ngFor="let childL1 of menuItem.children">
                  <li *ngIf="!childL1.children">
                      <a mat-menu-item [routerLink]="childL1.routerLink" routerLinkActive="mat-accent">{{childL1.label}}</a>
                  </li>
                </ng-container>
              </span>
            </mat-menu>
          </ng-container>
        </ng-container>
      </ng-container>
      <li *ngIf="currentUser">
        <a mat-button (click)="logout()" >Logout ({{ currentUser.email }})</a>
      </li>
      <li *ngIf="currentUser">
        <a mat-icon-button [matMenuTriggerFor]="menu" aria-label="System">
          <mat-icon
          aria-label="Więcej"
          title="Więcej" 
          alt="Więcej">more_vert</mat-icon>
        </a>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="openChangePasswordDialog()">
            <mat-icon>person</mat-icon>
            <span>Zmień hasło</span>
          </button>
        </mat-menu>  
      </li>
    </ul>
  </div>
</mat-toolbar>
